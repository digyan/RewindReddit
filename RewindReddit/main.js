var c=0;$(document).ready(function(){comments=getComments();makeSlider(getExtrema(),comments)});function getComments(){var a=Array(parseInt($(".comments.may-blank").text().split(" ")[0])),b=$(".sitetable.nestedlisting").children(".thing"),d=0;$.each(b,function(b,e){var f=$(e).find(".entry");$.each(f,function(e,b){a[d]=[$(b),(new Date($(b).find(".collapsed > .live-timestamp").attr("datetime"))).getTime()];d+=1})});return a}
function makeSlider(a,b){$('<div id="RedditRewind"><label id="timerange" style="font-size: 14px">Time Range:</label><div id="rewindslider"></div></div>').insertBefore(".sitetable.nestedlisting");$("#rewindslider").slider({range:!0,min:a[0],max:a[1],values:[a[0],a[1]],step:(a[1]-a[0])/100,change:function(a,b){$("#timerange").text("Time Range: "+getDateString(b.values[0])+" - "+getDateString(b.values[1]))},slide:function(a,d){c+=1;25==c&&($("#timerange").text("Time Range: "+getDateString(d.values[0])+
" - "+getDateString(d.values[1])),c=0);hideComments(b,d.values)}});var d=parseInt($(".side").css("margin-left"))+parseInt($(".side").css("padding-left"))+parseInt($(".side").css("margin-right"))+parseInt($(".side").css("padding-right"))+parseInt($(".side").css("width"))+parseInt($(".content").css("margin-right"));$("#RedditRewind").css({"margin-bottom":"20px"});$("#timerange").css({"margin-right":"10px","margin-left":"10px","margin-bottom":"100px"});$("#rewindslider").css({position:"absolute",right:(d+
20).toString()+"px",left:(parseInt($(".content").css("margin-left"))+20).toString()+"px"});$("#timerange").text("Time Range: "+getDateString($("#rewindslider").slider("values",0))+" - "+getDateString($("#rewindslider").slider("values",1)))}function getExtrema(){min=(new Date($(".sitetable.linklisting").find(".live-timestamp").attr("datetime"))).getTime();max=Date.now();return[min,max]}function pad(a){return("00"+a).slice(-2)}
function getDateString(a){a=new Date(a);a.getMonth();a.getDate();a.getFullYear();a.getHours();pad(a.getMinutes());return moment(a).fromNow()}function hideComments(a,b){for(i=0;i<a.length;i++)if(void 0!=a[i]){var d=a[i][1];b[0]>d||b[1]<d?$(a[i][0]).parent().hide():$(a[i][0]).parent().show()}};