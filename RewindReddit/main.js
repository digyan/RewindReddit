var c=0,newestDate=0,oldestDate=Date.now();$(document).ready(function(){comments=getComments();makeSlider(getExtrema(),comments)});
function getComments(){var a=Array(parseInt($(".comments.may-blank").text().split(" ")[0])),d=$(".sitetable.nestedlisting").children(".thing"),e=0;$.each(d,function(d,h){var b=$(h).find(".entry");$.each(b,function(b,d){var f=(new Date($(d).find(".collapsed > .live-timestamp").attr("datetime"))).getTime();a[e]=[$(d),f];f>newestDate&&(newestDate=f);f<oldestDate&&(oldestDate=f);e+=1})});return a}
function makeSlider(a,d){$('<div id="RedditRewind"><label id="timerange" style="font-size: 14px">Time Range:</label><div id="rewindslider"></div></div>').insertBefore(".sitetable.nestedlisting");$("#rewindslider").slider({range:!0,min:a[0],max:a[1],values:[a[0],a[1]],step:(a[1]-a[0])/100,change:function(a,b){$("#timerange").text("Time Range: "+getDateString(b.values[0])+" - "+getDateString(b.values[1]))},slide:function(a,b){c+=1;25==c&&($("#timerange").text("Time Range: "+getDateString(b.values[0])+
" - "+getDateString(b.values[1])),c=0);$("#timerange").text("Time Range: "+getDateString(b.values[0])+" - "+getDateString(b.values[1]));hideComments(d,b.values)}});var e=parseInt($(".side").css("margin-left"))+parseInt($(".side").css("padding-left"))+parseInt($(".side").css("margin-right"))+parseInt($(".side").css("padding-right"))+parseInt($(".side").css("width"))+parseInt($(".content").css("margin-right"))+parseInt($("body").css("margin-right")),g=parseInt($(".content").css("margin-left"))+parseInt($(".commentarea").css("margin-left"))+
parseInt($(".commentarea").css("padding-left"))+parseInt($("body").css("margin-left"));$("#RedditRewind").css({"margin-bottom":"20px"});$("#timerange").css({"margin-right":"10px","margin-left":"10px","margin-bottom":"100px"});$("#rewindslider").css({position:"absolute",right:(e+30).toString()+"px",left:(g+20).toString()+"px"});$("#timerange").text("Time Range: "+getDateString($("#rewindslider").slider("values",0))+" - "+getDateString($("#rewindslider").slider("values",1)))}
function getExtrema(){min=oldestDate;max=newestDate;min==max&&(max=Date.now());return[min,max]}function getDateString(a){return moment(a).fromNow()}function hideComments(a,d){for(i=0;i<a.length;i++)if(void 0!=a[i]){var e=a[i][1];d[0]>e||d[1]<e?$(a[i][0]).parent().hide():$(a[i][0]).parent().show()}};